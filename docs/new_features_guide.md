# 新功能使用说明

## 功能概述

本次更新添加了两个重要功能:

### 1. 视频预览 - 字幕同步播放器

**位置**: 主界面导航栏 → "视频预览"

**功能特点**:
- 左侧视频播放,右侧字幕列表
- 播放时自动高亮当前字幕并滚动到可见区域
- 点击字幕条目可跳转到对应时间点
- 支持拖拽视频和字幕文件

**使用方法**:
1. 点击导航栏的"视频预览"进入界面
2. 点击"打开视频"选择视频文件,或直接拖拽视频文件到窗口
3. 点击"打开字幕"选择字幕文件,或直接拖拽字幕文件到窗口
4. 播放视频,右侧字幕列表会自动同步高亮
5. 点击任意字幕条目可跳转到该时间点

**快捷键**:
- `空格`: 播放/暂停
- `←`: 后退3秒
- `→`: 前进3秒

---

### 2. AI摘要 - 思维导图生成

**位置**: 主界面导航栏 → "AI摘要"

**功能特点**:
- 使用LLM分析字幕内容生成思维导图
- 交互式可视化,支持缩放、拖拽
- 支持自定义提示词
- 可导出为HTML文件

**使用方法**:
1. 点击导航栏的"AI摘要"进入界面
2. 点击"打开字幕"选择已处理的字幕文件
3. (可选) 点击"自定义提示词"编辑生成思维导图的提示词
4. 点击"生成思维导图"按钮
5. 等待LLM生成(通常需要10-30秒)
6. 生成完成后可以:
   - 使用鼠标滚轮缩放
   - 拖拽移动视图
   - 点击"重置视图"恢复初始状态
   - 点击"导出"保存为HTML文件

**自定义提示词说明**:
- 提示词中使用 `{subtitle_text}` 作为字幕内容的占位符
- 留空则使用默认提示词
- 默认提示词会要求LLM生成JSON格式的层级结构

**注意事项**:
- 思维导图功能需要配置LLM API(与字幕优化使用相同配置)
- 建议使用处理后的字幕文件(包含翻译或优化)
- 生成时间取决于字幕长度和LLM响应速度
- 导出的HTML文件可在浏览器中独立打开

---

## 技术实现

### 视频预览界面
- 使用VLC播放器组件(`MyVideoWidget`)
- 监听`positionChanged`信号实现字幕同步
- 使用`QListWidget`显示字幕列表
- 通过`QSplitter`实现可调整的分割布局

### AI摘要界面
- 后台线程调用LLM生成思维导图数据
- 使用`QWebEngineView`渲染交互式HTML
- D3.js实现径向树布局可视化
- 支持JSON数据注入到HTML模板

---

## 常见问题

**Q: 视频播放器无法播放某些格式?**
A: 确保系统已安装VLC播放器,或尝试转换视频格式为MP4。

**Q: 思维导图生成失败?**
A: 检查LLM API配置是否正确,确保API密钥有效且有足够余额。

**Q: 思维导图显示空白?**
A: 可能是LLM返回的JSON格式不正确,尝试使用自定义提示词明确要求JSON格式。

**Q: 字幕同步不准确?**
A: 确保字幕文件的时间轴正确,可以在"字幕优化与翻译"界面检查。

---

## 更新日志

**v1.0.0** (2026-01-21)
- ✨ 新增视频预览界面,支持字幕同步显示
- ✨ 新增AI摘要功能,自动生成思维导图
- 🎨 优化主界面导航结构
- 🔧 添加全局信号`load_video_with_subtitles`支持跨界面通信
